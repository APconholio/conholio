<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dino Training Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f6fa; margin: 0; padding: 0; }
    .container { max-width: 700px; margin: 20px auto; background: #fff; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.09); padding: 30px; }
    h1 { text-align: center; color: #3b82f6; }
    label { font-weight: bold; }
    .section { margin-bottom: 24px; }
    .stats-grid { display: grid; grid-template-columns: 130px 1fr 1fr; gap: 10px; align-items: center; }
    .boosts-grid, .training-grid { display: grid; grid-template-columns: 130px 1fr 1fr; gap: 10px; align-items: center; }
    .dropdown { width: 80px; }
    input[type="number"] { width: 80px; padding: 4px; border: 1px solid #ccc; border-radius: 5px; }
    .note { font-size: 0.9em; color: #888; }
    .final-stats { background: #f0f4fa; border-radius: 8px; padding: 18px; margin-top: 12px; }
    .stat-label { font-weight: bold; }
    .error { color: #e11d48; font-size: 0.95em; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Dino Training Calculator</h1>
    <!-- Section: Base Stats -->
    <div class="section">
      <label>Base Stats</label>
      <div class="stats-grid">
        <span>Health:</span><input type="number" id="baseHealth" value="1000" min="0"><span></span>
        <span>Attack:</span><input type="number" id="baseAttack" value="500" min="0"><span></span>
        <span>Speed:</span><input type="number" id="baseSpeed" value="100" min="0"><span></span>
        <span>Armor:</span><input type="number" id="baseArmor" value="10" min="0"><span></span>
        <span>Crit Rate:</span><input type="number" id="baseCritRate" value="5" min="0"><span>%</span>
        <span>Crit Damage:</span><input type="number" id="baseCritDamage" value="150" min="0"><span>%</span>
      </div>
    </div>
    <!-- Section: Per-level Gain -->
    <div class="section">
      <label>Per-level Gain</label>
      <div class="stats-grid">
        <span>Health Gain:</span><input type="number" id="gainHealth" value="50" min="0"><span></span>
        <span>Attack Gain:</span><input type="number" id="gainAttack" value="25" min="0"><span></span>
        <span>Speed Gain:</span><input type="number" id="gainSpeed" value="1" min="0"><span></span>
        <span>Armor Gain:</span><input type="number" id="gainArmor" value="1" min="0"><span></span>
        <span>Crit Rate Gain:</span><input type="number" id="gainCritRate" value="0.2" min="0" step="0.01"><span>%</span>
        <span>Crit Damage Gain:</span><input type="number" id="gainCritDamage" value="0.5" min="0" step="0.01"><span>%</span>
      </div>
    </div>
    <!-- Section: Level Selection -->
    <div class="section">
      <label>Level</label> 
      <select id="level" class="dropdown">
        <!-- Options 1-35 will be generated by JS -->
      </select>
    </div>
    <!-- Section: Boosts -->
    <div class="section">
      <label>Boosts <span class="note">(Distribute up to 20 between Health, Attack, Speed)</span></label>
      <div class="boosts-grid">
        <span>Health Boost:</span><input type="number" id="boostHealth" value="0" min="0" max="20"><span></span>
        <span>Attack Boost:</span><input type="number" id="boostAttack" value="0" min="0" max="20"><span></span>
        <span>Speed Boost:</span><input type="number" id="boostSpeed" value="0" min="0" max="20"><span></span>
      </div>
      <div class="error" id="boostError"></div>
    </div>
    <!-- Section: Training Points -->
    <div class="section">
      <label>Training Points <span class="note">(Up to 120 per stat, or custom cap)</span></label>
      <div class="training-grid">
        <span>Health TP:</span><input type="number" id="tpHealth" value="0" min="0" max="120"><input type="number" id="capHealth" value="120" min="1" style="width:50px;" title="Cap">
        <span>Attack TP:</span><input type="number" id="tpAttack" value="0" min="0" max="120"><input type="number" id="capAttack" value="120" min="1" style="width:50px;" title="Cap">
        <span>Speed TP:</span><input type="number" id="tpSpeed" value="0" min="0" max="120"><input type="number" id="capSpeed" value="120" min="1" style="width:50px;" title="Cap">
        <span>Armor TP:</span><input type="number" id="tpArmor" value="0" min="0" max="120"><input type="number" id="capArmor" value="120" min="1" style="width:50px;" title="Cap">
        <span>Crit Rate TP:</span><input type="number" id="tpCritRate" value="0" min="0" max="120"><input type="number" id="capCritRate" value="120" min="1" style="width:50px;" title="Cap">
        <span>Crit Damage TP:</span><input type="number" id="tpCritDamage" value="0" min="0" max="120"><input type="number" id="capCritDamage" value="120" min="1" style="width:50px;" title="Cap">
      </div>
      <div class="error" id="tpError"></div>
    </div>
    <!-- Section: Final Stats -->
    <div class="final-stats" id="finalStats">
      <!-- Results will be shown here -->
    </div>
  </div>
  <script>
    // Dynamically fill level dropdown
    const levelSelect = document.getElementById('level');
    for(let i=1; i<=35; i++) {
      const opt = document.createElement('option');
      opt.value = i; opt.textContent = i;
      levelSelect.appendChild(opt);
    }
    levelSelect.value = "1";

    // Get all relevant input elements
    const baseInputs = {
      Health: document.getElementById('baseHealth'),
      Attack: document.getElementById('baseAttack'),
      Speed: document.getElementById('baseSpeed'),
      Armor: document.getElementById('baseArmor'),
      CritRate: document.getElementById('baseCritRate'),
      CritDamage: document.getElementById('baseCritDamage')
    };
    const gainInputs = {
      Health: document.getElementById('gainHealth'),
      Attack: document.getElementById('gainAttack'),
      Speed: document.getElementById('gainSpeed'),
      Armor: document.getElementById('gainArmor'),
      CritRate: document.getElementById('gainCritRate'),
      CritDamage: document.getElementById('gainCritDamage')
    };
    const boostInputs = {
      Health: document.getElementById('boostHealth'),
      Attack: document.getElementById('boostAttack'),
      Speed: document.getElementById('boostSpeed')
    };
    const tpInputs = {
      Health: document.getElementById('tpHealth'),
      Attack: document.getElementById('tpAttack'),
      Speed: document.getElementById('tpSpeed'),
      Armor: document.getElementById('tpArmor'),
      CritRate: document.getElementById('tpCritRate'),
      CritDamage: document.getElementById('tpCritDamage')
    };
    const capInputs = {
      Health: document.getElementById('capHealth'),
      Attack: document.getElementById('capAttack'),
      Speed: document.getElementById('capSpeed'),
      Armor: document.getElementById('capArmor'),
      CritRate: document.getElementById('capCritRate'),
      CritDamage: document.getElementById('capCritDamage')
    };

    // Error fields
    const boostError = document.getElementById('boostError');
    const tpError = document.getElementById('tpError');
    const finalStats = document.getElementById('finalStats');

    // Listen to all inputs
    const allInputs = [
      ...Object.values(baseInputs),
      ...Object.values(gainInputs),
      ...Object.values(boostInputs),
      ...Object.values(tpInputs),
      ...Object.values(capInputs),
      levelSelect
    ];
    allInputs.forEach(input => input.addEventListener('input', updateStats));
    levelSelect.addEventListener('change', updateStats);

    function updateStats() {
      // 1. Validate Boosts
      let totalBoosts = +boostInputs.Health.value + +boostInputs.Attack.value + +boostInputs.Speed.value;
      let boostsValid = totalBoosts <= 20;
      boostError.textContent = boostsValid ? "" : "You can only allocate up to 20 total boost points!";

      // 2. Validate TP against caps
      let tpValid = true;
      for (let stat in tpInputs) {
        let tp = +tpInputs[stat].value;
        let cap = +capInputs[stat].value;
        if (tp > cap) {
          tpValid = false;
        }
        if (tp > 120) { tpValid = false; }
        tpInputs[stat].max = cap; // enforce max in UI
      }
      tpError.textContent = tpValid ? "" : "A training point value exceeds its cap (or 120).";

      // If errors, don't calculate
      if (!boostsValid || !tpValid) {
        finalStats.innerHTML = "<span class='error'>Please correct the errors above to see results.</span>";
        return;
      }

      // 3. Calculate final stats
      let lvl = +levelSelect.value;
      let display = "<h3>Final Stats</h3><table>";
      const statDisplayNames = {
        Health: "Health",
        Attack: "Attack",
        Speed: "Speed",
        Armor: "Armor",
        CritRate: "Crit Rate",
        CritDamage: "Crit Damage"
      };
      for (let stat in baseInputs) {
        let base = +baseInputs[stat].value;
        let gain = +gainInputs[stat].value;
        let boost = boostInputs[stat] ? +boostInputs[stat].value : 0;
        let tp = tpInputs[stat] ? +tpInputs[stat].value : 0;
        let cap = capInputs[stat] ? +capInputs[stat].value : 120;

        // Calculation: Base + (Gain * (level - 1)) + Boost Bonus + TP Bonus
        // Boosts: each boost point can be +2% of base stat (example, adjust as needed)
        // TP: each point = +1 per stat (or % for Crit stats, see below)
        let statValue = base + gain * (lvl - 1);

        // Apply boosts (only to Health, Attack, Speed)
        if (["Health", "Attack", "Speed"].includes(stat)) {
          statValue += Math.round(base * 0.02 * boost); // +2% per boost point
        }
        // Apply training points
        if (["Health", "Attack", "Speed", "Armor"].includes(stat)) {
          statValue += tp; // +1 per TP
        } else if (stat === "CritRate") {
          statValue += 0.1 * tp; // +0.1% per TP
        } else if (stat === "CritDamage") {
          statValue += 0.2 * tp; // +0.2% per TP
        }

        // Formatting
        let valueDisplay = statValue.toFixed(2);
        if (stat === "CritRate" || stat === "CritDamage") valueDisplay += "%";
        display += `<tr><td class="stat-label">${statDisplayNames[stat]}:</td><td>${valueDisplay}</td></tr>`;
      }
      display += "</table>";
      finalStats.innerHTML = display;
    }
    // Initialize
    updateStats();
  </script>
</body>
</html>
